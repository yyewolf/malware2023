import os
import time
import subprocess

chemin_fichier_keys = r"Z:\keys.txt"
chemin_programme = r"Z:\gigachad_og.exe"

def read_console_output(process):
    output = ''
    for _ in range(30):
        char = msvcrt.getche()
        output += char
        print(output)
    return output

f = open("Z:\\out.txt", "w+")
def run_program(key, command):
    p = subprocess.Popen(command)
    time.sleep(0.08)
    p.terminate()
    print ''
    return ''

# Read keys from the file
with open(chemin_fichier_keys, 'r') as keys_file:
    keys = [line.strip() for line in keys_file.readlines()]

keys = keys[2000:2400]

print "BEGIN"
# Run the program with each key as an argument
for i, key in enumerate(keys):
    command = r'{} {}'.format(chemin_programme, key)
    print str(i) + " " + key+":"
    output = run_program(key, command)
